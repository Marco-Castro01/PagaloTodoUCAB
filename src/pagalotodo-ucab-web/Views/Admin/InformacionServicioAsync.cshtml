@model UCABPagaloTodoWeb.Models.ServicioModel

<h1>Información del Servicio</h1>

<div class="prestador-info">
    <h3>ID: @Model.Id</h3>
    <h3>Nombre: @Model.name</h3>
    <h3>Id del prestador de Servicio: @Model.prestadorServicioId</h3>
    <h3>Nombre de prestador de servicio: @Model.prestadorServicioName</h3>
    <h3>Numero de Cuenta: @Model.accountNumber</h3>
    <h3>Tipo de Servicio: <span class="badge @(Model.tipoServicio == UCABPagaloTodoWeb.enums.TipoServicio.directo ? "badge-success" : "badge-info")">@(Model.tipoServicio == UCABPagaloTodoWeb.enums.TipoServicio.directo ? "De pago Directo" : "Pago por deuda")</span></h3>


    <h3>Estado: <span class="badge @(Model.statusServicio switch { UCABPagaloTodoWeb.enums.StatusServicio.activa => "badge-success", UCABPagaloTodoWeb.enums.StatusServicio.inactiva => "badge-danger", _ => "badge-info" })">@(Model.statusServicio switch { UCABPagaloTodoWeb.enums.StatusServicio.activa => "Activo", UCABPagaloTodoWeb.enums.StatusServicio.inactiva => "Inactivo", _ => "Próximamente" })</span></h3>
</div>

<div>
    <h2>Servicios <a href="#" class="btn btn-primary">Agregar Servicio</a></h2>
    @if (Model.CamposDeLosPagos.Count == 0)
    {
        <div class="alert alert-info" role="alert">
            Sin campos personalizados asignados.
        </div>
    }
    else
    {
        <div class="row">
            @foreach (var campo in Model.CamposDeLosPagos)
            {
                <div class="col-md-4">
                    <div class="card servicio-card">
                        <div class="card-body">
                            <h5 class="card-title">@campo.Nombre</h5>
                            <h5 class="card-title">Tipo de dato: @campo.TipoDato</h5>
                            <p class="card-text">Longitud del campo: @campo.Longitud</p>

                            @if (campo.TipoDato == UCABPagaloTodoWeb.enums.TipoDato.fecha)
                            {
                                <p class="card-text">Formato de fecha: @campo.formatofecha</p>
                            }
                            else if (campo.TipoDato == UCABPagaloTodoWeb.enums.TipoDato.entero)
                            {
                                <p class="card-text">Separador de Miles: @campo.separadorDeMiles</p>
                            }
                            else if (campo.TipoDato == UCABPagaloTodoWeb.enums.TipoDato.conDecimal)
                            {
                                <p class="card-text">Separador de Decimales: @campo.separadorDeDecimales</p>
                            }

                            <p class="card-text">Archivo Conciliacion: <span class="badge @(campo.inCOnciliacion == true ? "badge-success" : "badge-danger")">@(campo.inCOnciliacion == true ? "En archivo" : "No en archivo")</span></p>
                        </div>
                    </div>
                </div>
            }
        </div>
    }
</div>

@section Scripts {
    <script>
        $(document).ready(function () {
            $('.servicio-card').hover(function () {
                $(this).toggleClass('card-hover');
            });

            $('#servicioDropdown').change(function () {
                var servicioId = $(this).val();

                // Obtener información del servicio seleccionado mediante una llamada AJAX
                $.ajax({
                    url: '/Prestador/ObtenerServicioInfo',
                    type: 'GET',
                    data: { servicioId: servicioId },
                    success: function (result) {
                        $('#serviceName').text('Nombre: ' + result.name);
                        $('#accountNumber').text('Número de cuenta: ' + result.accountNumber);
                        $('#prestadorServicioName').text('Prestador de servicio: ' + result.prestadorServicioName);
                        $('#tipoServicio').text('Tipo de servicio: ' + result.tipoServicio);
                        $('#statusServicio').html('Estado de servicio: <span class="badge ' + (result.statusServicio === 'Activo' ? 'badge-success' : result.statusServicio === 'Inactivo' ? 'badge-danger' : 'badge-info') + '">' + result.statusServicio + '</span>');
                    },
                    error: function (xhr, status, error) {
                        console.log('Error al obtener información del servicio:', error);
                    }
                });
            });
        });
    </script>

    <style>
        .prestador-info {
            margin-bottom: 20px;
        }

        .servicio-card {
            margin-bottom: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .card-body {
            padding: 1.25rem;
        }

        .badge {
            padding: 0.4em 0.75em;
            font-size: 85%;
            font-weight: 700;
            line-height: 1;
            text-align: center;
            white-space: nowrap;
            vertical-align: baseline;
            border-radius: 0.25rem;
        }

        .badge-success {
            color: #ffffff;
            background-color: #28a745;
        }

        .badge-danger {
            color: #ffffff;
            background-color: #dc3545;
        }

        .card-hover {
            transform: scale(1.05);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
        }
    </style>
}
